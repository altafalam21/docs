"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7555],{3905:function(e,t,o){o.d(t,{Zo:function(){return u},kt:function(){return m}});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=n.createContext({}),s=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},u=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=s(o),m=r,h=d["".concat(c,".").concat(m)]||d[m]||p[m]||l;return o?n.createElement(h,a(a({ref:t},u),{},{components:o})):n.createElement(h,a({ref:t},u))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=o.length,a=new Array(l);a[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,a[1]=i;for(var s=2;s<l;s++)a[s]=o[s];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},7138:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var n=o(7462),r=o(3366),l=(o(7294),o(3905)),a=["components"],i={sidebar_position:2},c="Running Locally - Docker Compose",s={unversionedId:"getting-started-local/running-locally-docker",id:"getting-started-local/running-locally-docker",isDocsHomePage:!1,title:"Running Locally - Docker Compose",description:"In this article we will explore how you can set up Netflix Conductor on your local machine for trying out some of its",source:"@site/docs/getting-started-local/running-locally-docker.md",sourceDirName:"getting-started-local",slug:"/getting-started-local/running-locally-docker",permalink:"/docs/docs/getting-started-local/running-locally-docker",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/getting-started-local/running-locally-docker.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialsSideBar",previous:{title:"Running Locally - From Code",permalink:"/docs/docs/getting-started-local/running-locally"},next:{title:"Running Locally - Minikube - k8s",permalink:"/docs/docs/getting-started-local/running-locally-minikube"}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Important Notes",id:"important-notes",children:[]},{value:"Steps",id:"steps",children:[]},{value:"Potential problems",id:"potential-problems",children:[]}],p={toc:u};function d(e){var t=e.components,i=(0,r.Z)(e,a);return(0,l.kt)("wrapper",(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"running-locally---docker-compose"},"Running Locally - Docker Compose"),(0,l.kt)("p",null,"In this article we will explore how you can set up Netflix Conductor on your local machine for trying out some of its\nfeatures."),(0,l.kt)("p",null,"This article follows the quickest way to set up your local development instance of Conductor. In comparison to the\nprevious article, we will be using Docker Compose which simplifies all required steps into a smaller set."),(0,l.kt)("p",null,"After completing the steps in this article, you will have:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A local instance of Netflix Conductor API server running")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Have the UI spun up against the API server with the ability to search")),(0,l.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Install Docker desktop: ",(0,l.kt)("a",{parentName:"li",href:"https://docs.docker.com/desktop/"},"https://docs.docker.com/desktop/"))),(0,l.kt)("h3",{id:"important-notes"},"Important Notes"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"This will only work in an Intel or x86 based chip. If you are using a Mac M1 or arm64 based CPU, you might run into\nissues loading up the Elasticsearch. This is because the image that is referred by docker compose is x86 based and at\nthe time of writing this article, the default ES version is 6.8.x. There is no known image for arm64 for\nElasticsearch 6.8.x. You can upgrade to ES 7 and solve this but that requires additional steps.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"You will need a reasonable about of RAM to run everything locally. Recommended minimum is 16 GB."))),(0,l.kt)("h3",{id:"steps"},"Steps"),(0,l.kt)("h4",{id:"1-clone-the-conductor-code"},"1. Clone the Conductor Code"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ git clone https://github.com/Netflix/conductor.git\nCloning into 'conductor'...\nremote: Enumerating objects: 53328, done.\nremote: Counting objects: 100% (1555/1555), done.\nremote: Compressing objects: 100% (1032/1032), done.\nremote: Total 53328 (delta 298), reused 1351 (delta 206), pack-reused 51773\nReceiving objects: 100% (53328/53328), 20.53 MiB | 9.50 MiB/s, done.\nResolving deltas: 100% (20544/20544), done.\n")),(0,l.kt)("h4",{id:"2-build-the-docker-compose"},"2. Build the Docker Compose"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd conductor\nconductor $ cd docker\ndocker $ docker-compose build\n")),(0,l.kt)("h4",{id:"3-run-docker-compose"},"3. Run Docker Compose"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker $ docker-compose up\n")),(0,l.kt)("p",null,"Once up and running, you will see the following in your Docker dashboard:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Conductor Docker Compose",src:o(7843).Z})),(0,l.kt)("p",null,"You will see three containers:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Elasticsearch"),(0,l.kt)("li",{parentName:"ol"},"Conductor UI"),(0,l.kt)("li",{parentName:"ol"},"Conductor Server")),(0,l.kt)("p",null,"You can access all three on your browser to verify that it is running correctly:"),(0,l.kt)("p",null,"Conductor Server URL: ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:8080/"},"http://localhost:8080/")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Conductor Server Home Page",src:o(3225).Z})),(0,l.kt)("p",null,"Conductor UI URL: ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:5000/"},"http://localhost:5000/")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Conductor Server Home Page",src:o(7483).Z})),(0,l.kt)("p",null,"Note that the developer console is enabled by default when running locally. You can dismiss it as shown in the image\nabove."),(0,l.kt)("p",null,"Elasticsearch URL: ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9200/"},"http://localhost:9200/")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Conductor Elasticsearch Console",src:o(6094).Z})),(0,l.kt)("p",null,"Awesome! You now have a working version of Conductor on your local which includes the search functionality."),(0,l.kt)("p",null,"This documentation is also available\nat: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Netflix/conductor/tree/main/docker"},"Netflix Conductor Github - Docker")),(0,l.kt)("h3",{id:"potential-problems"},"Potential problems"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Not enough memory",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"You will need at least 16 GB of memory to run everything. You can modify the docker compose to skip using\nElasticsearch if you have no option to run this with your memory options."),(0,l.kt)("li",{parentName:"ol"},"To disable Elasticsearch using Docker Compose - follow the steps listed here: ",(0,l.kt)("strong",{parentName:"li"},"TODO LINK")))),(0,l.kt)("li",{parentName:"ol"},"Elasticsearch fails to come up in arm64 based CPU machines",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"As of writing this article, Conductor relies on 6.8.x version of Elasticsearch. This version doesn't have an\narm64 based Docker image. You will need to use Elasticsearch 7.x which requires a bit of customization to get up\nand running"),(0,l.kt)("li",{parentName:"ol"},"You can find the instructions here - ",(0,l.kt)("strong",{parentName:"li"},"TODO LINK")))),(0,l.kt)("li",{parentName:"ol"},"Elasticsearch remains in Yellow health",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"When you run Elasticsearch, sometimes the health remains in Yellow state. Conductor server by default requires\nGreen state to run when indexing is enabled. To work around this, you can use the following property:\n",(0,l.kt)("inlineCode",{parentName:"li"},"conductor.elasticsearch.clusteHealthColor=yellow")," Reference: ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/Netflix/conductor/issues/2262"},"Issue 2262"))))))}d.isMDXComponent=!0},3225:function(e,t,o){t.Z=o.p+"assets/images/conductorHome-7062915cde29523f95b05a6c178c9ffd.png"},7483:function(e,t,o){t.Z=o.p+"assets/images/conductorUIHome-43a60a50fb08d641d475771e0325a584.png"},7843:function(e,t,o){t.Z=o.p+"assets/images/dockerHome-a764db4d818a8458517fc9d5faeabcf3.png"},6094:function(e,t,o){t.Z=o.p+"assets/images/elasticSearchHome-473bc89ade0d001f6933c73acd1544d0.png"}}]);